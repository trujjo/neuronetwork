<!DOCTYPE html>
<html>
<head>
    <title>Neo4j Test Connection</title>
    <script src="https://cdn.neo4jlabs.com/neovis.js/v1.5.0/neovis.js"></script>
    <style>
        body { 
            margin: 0;
            background-color: #1a1a1a;
            color: white;
        }
        #viz {
            width: 100%;
            height: 100vh;
        }
        .button {
            position: absolute;
            top: 20px;
            left: 20px;
            padding: 10px 20px;
            background-color: #cc5500;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .button:hover {
            background-color: #ff6a00;
        }
    </style>
</head>
<body>
    <button class="button" onclick="showRandomNodes()">Show 10 Random Nodes</button>
    <div id="viz"></div>

    <script>
        let viz;

        function initViz() {
            const config = {
                container_id: "viz",
                server_url: "neo4j+s://4e5eeae5.databases.neo4j.io:7687",
                server_user: "neo4j",
                server_password: "Poconoco16!",
                labels: {
                    "*": {
                        caption: ["name"],
                        size: 3,
                        community: "community",
                        title_properties: ["name", "type"],
                        color: "#cc5500",
                    }
                },
                relationships: {
                    "*": {
                        thickness: 2,
                        caption: true,
                        color: "#808080"
                    }
                },
                initial_cypher: "MATCH (n) RETURN n LIMIT 1",
                backgroundColor: "#1a1a1a"
            };

            viz = new NeoVis.default(config);
            viz.render();
        }

        function showRandomNodes() {
            // This query will:
            // 1. Match all nodes
            // 2. Return a random sample of 10 nodes and their immediate relationships
            const randomNodesQuery = `
                MATCH (n)
                WITH n, rand() as r
                ORDER BY r
                LIMIT 10
                OPTIONAL MATCH (n)-[rel]-(connected)
                RETURN n, rel, connected
            `;
            
            viz.renderWithCypher(randomNodesQuery);
        }

        document.addEventListener('DOMContentLoaded', () => {
            initViz();
        });
    </script>
</body>
</html>
